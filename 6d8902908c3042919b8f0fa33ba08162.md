id: 6d8902908c3042919b8f0fa33ba08162
parent_id: 
item_type: 1
item_id: 671735500a7446cc82beb627a45f0045
item_updated_time: 1643525262403
title_diff: "[{\"diffs\":[[1,\"Default method\"]],\"start1\":0,\"start2\":0,\"length1\":0,\"length2\":14}]"
body_diff: "[{\"diffs\":[[1,\"<ins>Scenario that you face</ins>\\\n\\\n<ins>![e07e2d054a5b57036ed69405a52ec560.png](:/3de90446f0eb40dd913b138e594e6282)</ins>\\\n\\\n<ins>Goal to achieve</ins>\\\n\\\n![a0e5bc36ca1259f08f9152bd74739d77.png](:/d33e455af84842389a313627d259a844)\\\n\\\n## 1st Method: RineTd\\\n\\\nInstall the rinetd:\\\n\\\n> sudo apt update && sudo apt install rinetd\\\n\\\nConfigure the rinetd inside /etc/rinetd.conf:\\\n\\\nAdd this form of configuration (kali port TargetDestination port) ---- 0.0.0.0 80 216.58.207.142 80\\\n\\\nRestart the service: sudo systemctl restart rinetd\\\n\\\n## 2nd Method: SSH Port Forwarding\\\n\\\nFor scenarios where compromised machine does not have any outbound traffic filtering, and only exposes SSH, RDP and the vulnerable service port (allowed on the firewall)\\\n\\\n### Local Forwarding\\\n\\\nConfigure on Kali\\\n\\\n> sudo ssh -N -L 0.0.0.0:FREEPORT:TARGETMACHINEIP:TARGETPORT JMPHOSTUSER@JMPHOSTIP\\\n> \\\n> sudo ssh -N -L 0.0.0.0:445:192.168.190.5:445 student@192.168.190.44\\\n\\\nWhat you achieve is shown below. Traffic on Kali on target port will be send to Target machine via the compromised jumphost\\\n\\\n![b04db1f5b5d30ec9d90647243c6c8ca9.png](:/03fa6c3ae25f4a53a28ffb12b526bb07)\\\n\\\nSo for this case, we can interact with our own machine, to target our target machine e.g. if we want to do SMB service, we target localhost\\\n\\\n![b6a657a4566904fd999e8ad92f554183.png](:/aef63e3d792546b0b827508aade4791d)\\\n\\\n## Remote Forwarding\\\n\\\nReverse of local port forwarding -- Port is opened on the remote side of connection, traffic is sent to that port is forwarded to a port on the local machine\\\n\\\nBelow is an example of the setup\\\n\\\n<img src=\\\":/af7229bb8e794cf28cbf1454089481dc\\\" alt=\\\"eb13cf11ce9fba9b9b9f5054cf59bad9.png\\\" width=\\\"779\\\" height=\\\"359\\\" class=\\\"jop-noMdConv\\\">\\\n\\\nCall the command on the Linux Client\\\n\\\n> ssh -N -R KALIIP:FREEPORT:127.0.0.1:&lt;TargetServicePort&gt; kali@KALIIP\\\n\\\nWe can then communicate with the service on the Target Machine locally in Kali. Use NMap to scan it\\\n\\\n> nmap -sS -sV 127.0.0.1 -p FREEPORT\\\n\\\n## Dynamic Port Forwarding\\\n\\\nFor SOCKS4 App level port forwarding with SSH\\\n\\\nWrite on Kali:\\\n\\\n> sudo ssh -N -D 127.0.0.1:&lt;FreePort&gt; student@192.168.190.44\\\n\\\n<img src=\\\":/37f99c4a85e748d6a1bca32c620d2986\\\" alt=\\\"61ec77dc2e8dae1827b7441b97eca0aa.png\\\" width=\\\"971\\\" height=\\\"487\\\" class=\\\"jop-noMdConv\\\">\\\n\\\nThis will tunnel **ALL INCOMING TRAFFIC FROM LINUX CLIENT TO KALI.Â **But to direct the attack tools to use the proxy, we need to configure an application proxy, like ProxyChains\\\n\\\nConfigure ProxyChains --\\\n\\\n> nano ~/.proxychains/proxychains.conf --- socks4 127.0.0.1 &lt;FreePort&gt;\\\n> \\\n> ![499090371462b621e94805dd1473c8d2.png](:/063f11e0019249868832d58fc1dce1ea)\\\n\\\nEnd goal - can run commands to the port; Make sure to prepend every command we want to send with \\\"proxychains\\\"\\\n\\\nE.g.\\\n\\\n> proxychains nmap --top-ports=20 -sT -Pn 192.168.1.110\\\n\\\nProxychains comes in dynamically\\\n\\\n<img src=\\\":/a4aab50581414526ac0b26665fcdcf4a\\\" alt=\\\"376335f6cefc0823aefe0b86693368bc.png\\\" width=\\\"911\\\" height=\\\"403\\\" class=\\\"jop-noMdConv\\\">\"]],\"start1\":0,\"start2\":0,\"length1\":0,\"length2\":2953}]"
metadata_diff: {"new":{"id":"671735500a7446cc82beb627a45f0045","parent_id":"fa5212f3e7624b48b87153f3e4182dd1","latitude":"1.36730000","longitude":"103.80140000","altitude":"0.0000","author":"","source_url":"","is_todo":0,"todo_due":0,"todo_completed":0,"source":"joplin-desktop","source_application":"net.cozic.joplin-desktop","application_data":"","order":1642340411812,"user_updated_time":1643455402527,"markup_language":1,"is_shared":0,"share_id":"","conflict_original_id":"","master_key_id":""},"deleted":[]}
encryption_cipher_text: 
encryption_applied: 0
updated_time: 2022-01-30T06:52:57.451Z
created_time: 2022-01-30T06:52:57.451Z
type_: 13